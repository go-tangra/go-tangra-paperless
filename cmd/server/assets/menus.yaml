# Paperless Module Menu Definitions
# This file defines the menu structure for the Paperless (Document Management) module
# Used by admin service for dynamic menu registration

module:
  id: paperless
  name: Paperless
  description: Document Management with RustFS Storage

menus:
  - id: paperless
    parent_id: null
    type: CATALOG
    name: Document Management
    path: /paperless
    icon: lucide:file-text
    order: 500
    authority:
      - platform:admin
      - tenant:manager

  - id: paperless-documents
    parent_id: paperless
    type: MENU
    name: Documents
    path: documents
    component: app/paperless/document/index.vue
    icon: lucide:files
    order: 1
    authority:
      - platform:admin
      - tenant:manager

dashboard_widgets:
  - id: paperless.documents_total
    name: Total Documents
    description: Active and total document counts
    icon: lucide:files
    widget_type: stat_card
    data_source:
      endpoint: /admin/v1/modules/paperless/v1/statistics
      method: GET
    data_mapping:
      value_path: documents.byStatus.DOCUMENT_STATUS_ACTIVE
      total_path: documents.totalCount
      label: Documents
    default_size:
      width: 3
      height: 1
    tags: [paperless, overview]
    authority: [platform:admin, tenant:manager]

  - id: paperless.document_status_bar
    name: Document Status
    description: Bar chart of document statuses
    icon: lucide:bar-chart-3
    widget_type: bar_chart
    data_source:
      endpoint: /admin/v1/modules/paperless/v1/statistics
      method: GET
    data_mapping:
      data_path: documents.byStatus
      label: Document Status
    default_size:
      width: 4
      height: 2
    tags: [paperless, chart]
    authority: [platform:admin, tenant:manager]

  - id: paperless.by_source_pie
    name: Documents by Source
    description: Pie chart of documents grouped by source
    icon: lucide:upload
    widget_type: pie_chart
    data_source:
      endpoint: /admin/v1/modules/paperless/v1/statistics
      method: GET
    data_mapping:
      data_path: documents.bySource
      label: Document Source
    default_size:
      width: 4
      height: 2
    tags: [paperless, chart]
    authority: [platform:admin, tenant:manager]

  - id: paperless.storage_stat
    name: Storage Used
    description: Total document storage in bytes
    icon: lucide:hard-drive
    widget_type: stat_card
    data_source:
      endpoint: /admin/v1/modules/paperless/v1/statistics
      method: GET
    data_mapping:
      value_path: documents.totalStorageBytes
      label: Storage (bytes)
    default_size:
      width: 3
      height: 1
    tags: [paperless, overview]
    authority: [platform:admin, tenant:manager]

  - id: paperless.recent_uploads
    name: Recent Uploads
    description: Documents uploaded in last 24h and 7d
    icon: lucide:upload-cloud
    widget_type: stat_card
    data_source:
      endpoint: /admin/v1/modules/paperless/v1/statistics
      method: GET
    data_mapping:
      value_path: documents.recentUploads24h
      total_path: documents.recentUploads7d
      label: Recent Uploads (24h)
    default_size:
      width: 3
      height: 1
    tags: [paperless, overview]
    authority: [platform:admin, tenant:manager]

permission_groups:
  - name: Paperless
    module: paperless
    description: Paperless Document Management Permissions
    permissions:
      - name: View Documents
        code: paperless.document.view
        description: View document details and list
      - name: Upload Documents
        code: paperless.document.upload
        description: Upload new documents
      - name: Update Documents
        code: paperless.document.update
        description: Update document metadata
      - name: Delete Documents
        code: paperless.document.delete
        description: Delete documents

roles:
  - name: Paperless Administrator
    code: paperless.admin
    description: Full access to Paperless module
    is_system: true
    permissions:
      - paperless.document.view
      - paperless.document.upload
      - paperless.document.update
      - paperless.document.delete
      - paperless.category.manage

  - name: Paperless Operator
    code: paperless.operator
    description: Can upload and manage documents
    is_system: true
    permissions:
      - paperless.document.view
      - paperless.document.upload
      - paperless.document.update
      - paperless.category.manage

  - name: Paperless Viewer
    code: paperless.viewer
    description: Read-only access to Paperless module
    is_system: true
    permissions:
      - paperless.document.view
